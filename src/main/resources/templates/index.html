<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:text-align="http://www.w3.org/1999/xhtml">
<head>
    <div th:replace="~{fragments/header.html :: fragment-header}"></div>
    <title>spring framework study</title>
    <!-- index -->
    <link href="/css/styles.css" rel="stylesheet"/>
    <link href="/css/modern-index.css" rel="stylesheet"/>
    <!-- footer -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/css/footer.css" rel="stylesheet"/>
</head>
<body>
<!-- Navigation -->
<div th:insert="~{fragments/nav.html :: fragment-nav}"></div>
<!-- Modern Banner Section -->
<section class="modern-banner">
    <!-- Banner Slides -->
    <div class="banner-slide active">
        <img th:src="@{/img/main1.jpg}" alt="Featured Collection">
        <div class="banner-content">
            <div class="banner-eyebrow">New Collection</div>
            <h1 class="banner-title">스타일을 완성하는<br>특별한 순간</h1>
            <p class="banner-subtitle">당신만의 개성을 표현할 수 있는 프리미엄 컬렉션을 만나보세요</p>
            <div class="banner-cta">
                <a href="#products" class="banner-button primary">
                    <i class="fas fa-arrow-right"></i>
                    컬렉션 보기
                </a>
                <a href="/product" class="banner-button secondary">
                    상품 등록하기
                </a>
            </div>
        </div>
    </div>

    <div class="banner-slide">
        <img th:src="@{/img/main2.jpg}" alt="Premium Quality">
        <div class="banner-content">
            <div class="banner-eyebrow">Premium Quality</div>
            <h1 class="banner-title">품질에 대한<br>새로운 기준</h1>
            <p class="banner-subtitle">최고의 소재와 장인정신으로 완성된 프리미엄 라인업</p>
            <div class="banner-cta">
                <a href="#products" class="banner-button primary">
                    <i class="fas fa-star"></i>
                    프리미엄 보기
                </a>
                <a href="/mypage" class="banner-button secondary">
                    마이페이지
                </a>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <button class="banner-nav prev" onclick="previousSlide()">
        <i class="fas fa-chevron-left"></i>
    </button>
    <button class="banner-nav next" onclick="nextSlide()">
        <i class="fas fa-chevron-right"></i>
    </button>

    <!-- Indicators -->
    <div class="banner-indicators">
        <button class="banner-dot active" onclick="currentSlide(1)"></button>
        <button class="banner-dot" onclick="currentSlide(2)"></button>
    </div>

    <!-- Progress Bar -->
    <div class="banner-progress">
        <div class="banner-progress-bar"></div>
    </div>
</section>
<!-- Hero Section -->
<section class="hero-section">
    <div class="hero-content">
        <div class="hero-badge">신상품 출시</div>
        <h1 class="hero-title">새로운 컬렉션을<br>만나보세요</h1>
        <p class="hero-subtitle">최신 트렌드와 혁신적인 디자인이 만난 특별한 컬렉션</p>
        <div class="hero-cta">
            <a href="#products" class="cta-button cta-primary">쇼핑하기</a>
            <a href="/product" class="cta-button cta-secondary">상품등록</a>
        </div>
    </div>
</section>

<!-- Products Section -->
<section class="products-section" id="products">
    <div class="section-header">
        <div class="section-eyebrow">Featured Collection</div>
        <h2 class="section-title">New Arrivals</h2>
        <p class="section-description">엄선된 최신 상품들을 만나보세요. 품질과 스타일을 모두 만족시키는 특별한 컬렉션입니다.</p>
    </div>

    <div class="products-grid">
        <div th:each="product, iterStat : ${products}" class="product-card-wrapper">
            <a th:href="@{/product/detail/{id}(id=${product.number})}" class="product-card">
                <div class="product-image-container">
                    <img th:src="@{${product.imageUrl}}" class="product-image" alt="Product Image">
                    <div class="product-badge new" th:if="${iterStat.index < 3}">NEW</div>
                    <div class="product-badge sale" th:if="${iterStat.index >= 3 and iterStat.index < 6}">SALE</div>
                    <div class="product-actions">
                        <button class="action-button" title="장바구니 추가">
                            <i class="fas fa-shopping-cart"></i>
                        </button>
                        <button class="action-button" title="위시리스트">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-category">패션</div>
                    <h3 class="product-name" th:text="${product.name}">상품명</h3>
                    <p class="product-description" th:text="${product.intro}">상품 설명</p>
                    <div class="product-price" th:text="${product.price + '원'}">가격</div>
                </div>
            </a>
        </div>
    </div>
</section>

<!-- Featured Collections -->
<section class="featured-section">
    <div class="featured-content">
        <div class="section-header">
            <div class="section-eyebrow">Special Collection</div>
            <h2 class="section-title">추천 컬렉션</h2>
            <p class="section-description">시즌의 트렌드를 선도하는 특별한 컬렉션을 만나보세요</p>
        </div>

        <div class="featured-grid">
            <div class="featured-item">
                <img th:src="@{/img/main1.jpg}" alt="Spring Collection">
                <div class="featured-overlay">
                    <h3 class="featured-title">Spring Collection</h3>
                    <p class="featured-subtitle">봄의 싱그러움을 담은 컬렉션</p>
                    <a href="#products" class="featured-link">컬렉션 보기 →</a>
                </div>
            </div>
            <div class="featured-item">
                <img th:src="@{/img/main2.jpg}" alt="Premium Line">
                <div class="featured-overlay">
                    <h3 class="featured-title">Premium Line</h3>
                    <p class="featured-subtitle">프리미엄 소재로 완성된 럭셔리 라인</p>
                    <a href="#products" class="featured-link">컬렉션 보기 →</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Newsletter Section -->
<section class="newsletter-section">
    <div class="newsletter-content">
        <h2 class="newsletter-title">최신 소식을 받아보세요</h2>
        <p class="newsletter-description">새로운 상품 출시 소식과 특별한 혜택을 가장 먼저 만나보세요</p>
        <div class="newsletter-form">
            <input type="email" class="newsletter-input" placeholder="이메일을 입력하세요">
            <button class="newsletter-button">구독하기</button>
        </div>
    </div>
</section>

<!-- Interactive JavaScript -->
<script>
    // Modern Banner Functionality
    let currentSlideIndex = 0;
    const slides = document.querySelectorAll('.banner-slide');
    const dots = document.querySelectorAll('.banner-dot');
    const progressBar = document.querySelector('.banner-progress-bar');
    const slideInterval = 5000; // 5 seconds
    let slideTimer;
    let progressTimer;

    function showSlide(index) {
        // Hide all slides
        slides.forEach(slide => slide.classList.remove('active'));
        dots.forEach(dot => dot.classList.remove('active'));

        // Show current slide
        slides[index].classList.add('active');
        dots[index].classList.add('active');

        currentSlideIndex = index;
        resetProgress();
    }

    function nextSlide() {
        const nextIndex = (currentSlideIndex + 1) % slides.length;
        showSlide(nextIndex);
    }

    function previousSlide() {
        const prevIndex = (currentSlideIndex - 1 + slides.length) % slides.length;
        showSlide(prevIndex);
    }

    function currentSlide(index) {
        showSlide(index - 1);
    }

    function resetProgress() {
        clearInterval(progressTimer);
        progressBar.style.width = '0%';

        let progress = 0;
        progressTimer = setInterval(() => {
            progress += 100 / (slideInterval / 50);
            progressBar.style.width = progress + '%';

            if (progress >= 100) {
                clearInterval(progressTimer);
            }
        }, 50);
    }

    function startSlideShow() {
        slideTimer = setInterval(nextSlide, slideInterval);
        resetProgress();
    }

    function stopSlideShow() {
        clearInterval(slideTimer);
        clearInterval(progressTimer);
    }

    // Initialize banner
    if (slides.length > 0) {
        startSlideShow();

        // Pause on hover
        const banner = document.querySelector('.modern-banner');
        banner.addEventListener('mouseenter', stopSlideShow);
        banner.addEventListener('mouseleave', startSlideShow);
    }

    document.addEventListener('DOMContentLoaded', function() {
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Newsletter form handling
        const newsletterForm = document.querySelector('.newsletter-form');
        const newsletterInput = document.querySelector('.newsletter-input');
        const newsletterButton = document.querySelector('.newsletter-button');

        if (newsletterForm) {
            newsletterButton.addEventListener('click', function(e) {
                e.preventDefault();
                const email = newsletterInput.value.trim();

                if (!email) {
                    alert('이메일을 입력해주세요.');
                    return;
                }

                if (!isValidEmail(email)) {
                    alert('올바른 이메일 형식을 입력해주세요.');
                    return;
                }

                // Success animation
                newsletterButton.innerHTML = '<i class="fas fa-check"></i> 완료!';
                newsletterButton.style.background = '#28a745';
                newsletterInput.value = '';

                setTimeout(() => {
                    alert('뉴스레터 구독이 완료되었습니다!');
                    newsletterButton.innerHTML = '구독하기';
                    newsletterButton.style.background = '';
                }, 1500);
            });
        }

        // Product action buttons
        document.querySelectorAll('.action-button').forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();

                const icon = this.querySelector('i');
                const isCart = icon.classList.contains('fa-shopping-cart');
                const isHeart = icon.classList.contains('fa-heart');

                if (isCart) {
                    // Cart animation
                    this.style.background = '#28a745';
                    this.style.color = 'white';
                    icon.className = 'fas fa-check';

                    setTimeout(() => {
                        this.style.background = '';
                        this.style.color = '';
                        icon.className = 'fas fa-shopping-cart';
                    }, 2000);

                    showToast('장바구니에 추가되었습니다!');
                }

                if (isHeart) {
                    // Heart animation
                    if (icon.classList.contains('far')) {
                        icon.className = 'fas fa-heart';
                        this.style.color = '#ff6452';
                        showToast('위시리스트에 추가되었습니다!');
                    } else {
                        icon.className = 'far fa-heart';
                        this.style.color = '';
                        showToast('위시리스트에서 제거되었습니다!');
                    }
                }
            });
        });

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe product cards for scroll animations
        document.querySelectorAll('.product-card').forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
            card.style.transition = `opacity 0.6s ease ${index * 0.1}s, transform 0.6s ease ${index * 0.1}s`;
            observer.observe(card);
        });

        // Helper functions
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function showToast(message) {
            // Create toast element
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #111111;
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                z-index: 10000;
                font-size: 14px;
                font-weight: 500;
                box-shadow: 0 4px 16px rgba(0,0,0,0.2);
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            toast.textContent = message;

            document.body.appendChild(toast);

            // Animate in
            setTimeout(() => {
                toast.style.transform = 'translateX(0)';
            }, 100);

            // Animate out and remove
            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>
</body>
</html>