<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - AI Shopping Mall</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        nav {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav a {
            color: #667eea;
            text-decoration: none;
            margin-right: 20px;
            font-weight: bold;
        }

        nav a:hover {
            text-decoration: underline;
        }

        .api-section {
            background: white;
            padding: 30px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h2 {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        h3 {
            color: #764ba2;
            margin: 20px 0 10px 0;
        }

        .endpoint {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }

        .method {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
            margin-right: 10px;
        }

        .method.post {
            background: #28a745;
            color: white;
        }

        .method.get {
            background: #007bff;
            color: white;
        }

        .method.put {
            background: #ffc107;
            color: #333;
        }

        .method.delete {
            background: #dc3545;
            color: white;
        }

        code {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }

        pre code {
            background: none;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: #667eea;
            color: white;
        }

        tr:hover {
            background: #f5f5f5;
        }

        .required {
            color: #dc3545;
            font-weight: bold;
        }

        .optional {
            color: #6c757d;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“š API Documentation</h1>
            <p>AI Shopping Mall REST API Reference</p>
        </header>

        <nav>
            <a href="index.html">â† í™ˆìœ¼ë¡œ</a>
            <a href="#auth">ì¸ì¦</a>
            <a href="#recommendation">ì¶”ì²œ</a>
            <a href="#products">ìƒí’ˆ</a>
            <a href="#conversation">ëŒ€í™”</a>
        </nav>

        <div class="api-section" id="auth">
            <h2>ğŸ” ì¸ì¦ (Authentication)</h2>

            <div class="endpoint">
                <h3><span class="method post">POST</span> /api/auth/login</h3>
                <p>ì‚¬ìš©ì ë¡œê·¸ì¸</p>

                <h4>Request Body</h4>
                <pre><code>{
  "username": "user@example.com",
  "password": "password123"
}</code></pre>

                <h4>Response</h4>
                <pre><code>{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "userId": 1,
  "username": "user@example.com"
}</code></pre>
            </div>

            <div class="endpoint">
                <h3><span class="method post">POST</span> /api/auth/register</h3>
                <p>ì‹ ê·œ ì‚¬ìš©ì ë“±ë¡</p>

                <h4>Request Body</h4>
                <pre><code>{
  "username": "newuser@example.com",
  "password": "password123",
  "name": "í™ê¸¸ë™"
}</code></pre>
            </div>
        </div>

        <div class="api-section" id="recommendation">
            <h2>ğŸ¤– AI ì¶”ì²œ (Recommendation)</h2>

            <div class="endpoint">
                <h3><span class="method post">POST</span> /api/test/recommendation/text</h3>
                <p>í…ìŠ¤íŠ¸ ê¸°ë°˜ ìƒí’ˆ ì¶”ì²œ</p>

                <h4>Request Body</h4>
                <pre><code>{
  "query": "íŒŒë€ìƒ‰ ì…”ì¸  ì¶”ì²œí•´ì¤˜"
}</code></pre>

                <h4>Response</h4>
                <pre><code>{
  "recommendations": [
    {
      "productId": 123,
      "name": "ìŠ¬ë¦¼í• ë¸”ë£¨ ì…”ì¸ ",
      "price": 49000,
      "similarity": 0.89,
      "description": "ê³ ê¸‰ ë©´ ì†Œì¬ì˜ ìŠ¬ë¦¼í• ì…”ì¸ "
    },
    ...
  ],
  "totalCount": 10
}</code></pre>
            </div>

            <div class="endpoint">
                <h3><span class="method post">POST</span> /api/test/recommendation/embedding</h3>
                <p>í…ìŠ¤íŠ¸ë¥¼ ë²¡í„°ë¡œ ë³€í™˜ (í…ŒìŠ¤íŠ¸ìš©)</p>

                <h4>Request Body</h4>
                <pre><code>{
  "text": "í¸ì•ˆí•œ ì—¬ë¦„ ì˜·"
}</code></pre>

                <h4>Response</h4>
                <pre><code>{
  "embedding": [0.123, -0.456, 0.789, ...],
  "dimension": 1536
}</code></pre>
            </div>

            <div class="endpoint">
                <h3><span class="method post">POST</span> /api/recommendation/chat</h3>
                <p>ëŒ€í™”í˜• ì¶”ì²œ (GPT-4 í™œìš©)</p>

                <h4>Request Body</h4>
                <pre><code>{
  "userId": 1,
  "message": "ì—¬ë¦„ì— ì…ê¸° ì¢‹ì€ ì˜· ì¶”ì²œí•´ì¤˜",
  "conversationId": "conv_123" // optional
}</code></pre>

                <h4>Response</h4>
                <pre><code>{
  "conversationId": "conv_123",
  "aiResponse": "ì—¬ë¦„ì² ì—ëŠ” ì‹œì›í•œ ë¦°ë„¨ ì†Œì¬ì˜ ì˜·ì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤...",
  "recommendations": [...],
  "timestamp": "2025-10-27T14:30:00"
}</code></pre>
            </div>
        </div>

        <div class="api-section" id="products">
            <h2>ğŸ›ï¸ ìƒí’ˆ (Products)</h2>

            <div class="endpoint">
                <h3><span class="method get">GET</span> /api/products</h3>
                <p>ìƒí’ˆ ëª©ë¡ ì¡°íšŒ</p>

                <h4>Query Parameters</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Required</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>page</td>
                            <td>integer</td>
                            <td class="optional">Optional</td>
                            <td>í˜ì´ì§€ ë²ˆí˜¸ (ê¸°ë³¸ê°’: 0)</td>
                        </tr>
                        <tr>
                            <td>size</td>
                            <td>integer</td>
                            <td class="optional">Optional</td>
                            <td>í˜ì´ì§€ í¬ê¸° (ê¸°ë³¸ê°’: 20)</td>
                        </tr>
                        <tr>
                            <td>category</td>
                            <td>string</td>
                            <td class="optional">Optional</td>
                            <td>ì¹´í…Œê³ ë¦¬ í•„í„°</td>
                        </tr>
                    </tbody>
                </table>

                <h4>Response</h4>
                <pre><code>{
  "content": [
    {
      "id": 1,
      "name": "ë¸”ë£¨ ì…”ì¸ ",
      "price": 49000,
      "category": "ìƒì˜",
      "description": "í¸ì•ˆí•œ ë©´ ì†Œì¬"
    },
    ...
  ],
  "totalElements": 100,
  "totalPages": 5
}</code></pre>
            </div>

            <div class="endpoint">
                <h3><span class="method get">GET</span> /api/products/{id}</h3>
                <p>ìƒí’ˆ ìƒì„¸ ì¡°íšŒ</p>

                <h4>Response</h4>
                <pre><code>{
  "id": 1,
  "name": "ë¸”ë£¨ ì…”ì¸ ",
  "price": 49000,
  "category": "ìƒì˜",
  "description": "í¸ì•ˆí•œ ë©´ ì†Œì¬ì˜ ìŠ¬ë¦¼í• ì…”ì¸ ",
  "stock": 50,
  "images": ["url1", "url2"]
}</code></pre>
            </div>
        </div>

        <div class="api-section" id="conversation">
            <h2>ğŸ’¬ ëŒ€í™” íˆìŠ¤í† ë¦¬ (Conversation)</h2>

            <div class="endpoint">
                <h3><span class="method get">GET</span> /api/conversations/{userId}</h3>
                <p>ì‚¬ìš©ìì˜ ëŒ€í™” íˆìŠ¤í† ë¦¬ ì¡°íšŒ</p>

                <h4>Response</h4>
                <pre><code>{
  "conversations": [
    {
      "conversationId": "conv_123",
      "startedAt": "2025-10-27T14:00:00",
      "messageCount": 5,
      "lastMessage": "ê°ì‚¬í•©ë‹ˆë‹¤!"
    },
    ...
  ]
}</code></pre>
            </div>

            <div class="endpoint">
                <h3><span class="method get">GET</span> /api/conversations/{conversationId}/messages</h3>
                <p>íŠ¹ì • ëŒ€í™”ì˜ ë©”ì‹œì§€ ì¡°íšŒ</p>

                <h4>Response</h4>
                <pre><code>{
  "messages": [
    {
      "role": "user",
      "content": "íŒŒë€ìƒ‰ ì…”ì¸  ì¶”ì²œí•´ì¤˜",
      "timestamp": "2025-10-27T14:00:00"
    },
    {
      "role": "assistant",
      "content": "ì´ëŸ° ìƒí’ˆì€ ì–´ë– ì„¸ìš”?",
      "timestamp": "2025-10-27T14:00:05"
    },
    ...
  ]
}</code></pre>
            </div>
        </div>

        <div class="api-section">
            <h2>âš ï¸ ì—ëŸ¬ ì½”ë“œ</h2>
            <table>
                <thead>
                    <tr>
                        <th>Status Code</th>
                        <th>Error Code</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>400</td>
                        <td>INVALID_REQUEST</td>
                        <td>ì˜ëª»ëœ ìš”ì²­ íŒŒë¼ë¯¸í„°</td>
                    </tr>
                    <tr>
                        <td>401</td>
                        <td>UNAUTHORIZED</td>
                        <td>ì¸ì¦ ì‹¤íŒ¨</td>
                    </tr>
                    <tr>
                        <td>404</td>
                        <td>NOT_FOUND</td>
                        <td>ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ</td>
                    </tr>
                    <tr>
                        <td>500</td>
                        <td>INTERNAL_ERROR</td>
                        <td>ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜</td>
                    </tr>
                    <tr>
                        <td>503</td>
                        <td>AI_SERVICE_UNAVAILABLE</td>
                        <td>OpenAI API ì‘ë‹µ ì‹¤íŒ¨</td>
                    </tr>
                </tbody>
            </table>

            <h4>ì—ëŸ¬ ì‘ë‹µ í˜•ì‹</h4>
            <pre><code>{
  "error": "INVALID_REQUEST",
  "message": "ìš”ì²­ íŒŒë¼ë¯¸í„°ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤",
  "timestamp": "2025-10-27T14:30:00"
}</code></pre>
        </div>

        <div class="api-section">
            <h2>ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •</h2>

            <h3>Base URL</h3>
            <p>ë¡œì»¬: <code>http://localhost:8080</code></p>

            <h3>ì¸ì¦ í—¤ë”</h3>
            <pre><code>Authorization: Bearer {token}</code></pre>

            <h3>Content-Type</h3>
            <pre><code>Content-Type: application/json</code></pre>
        </div>
    </div>
</body>
</html>
